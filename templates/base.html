{{define "head"}}
{{- $title := .Title -}}
{{- $description := .Description -}}
{{- $fullURL := .FullURL -}}
{{- $image := .Image -}}
{{- $type := .Type -}}
{{- if .Page -}}
    {{- $title = .Page.Title -}}
    {{- $description = .Page.Description -}}
    {{- $fullURL = .Page.FullURL -}}
    {{- $image = .Page.Image -}}
    {{- $type = .Page.Type -}}
{{- else if .Category -}}
    {{- $title = .Category.Title -}}
    {{- $description = .Category.Description -}}
    {{- $fullURL = .Category.FullURL -}}
    {{- $image = .Category.Image -}}
    {{- $type = .Category.Type -}}
{{- end -}}
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Basic SEO -->
    <title>{{if $title}}{{$title}} | {{end}}mathbliss</title>
    <meta name="description" content="{{if $description}}{{$description}}{{else}}Math explanations that actually make sense.{{end}}">
    <link rel="canonical" href="{{$fullURL}}">

    <!-- Open Graph -->
    <meta property="og:title" content="{{if $title}}{{$title}}{{else}}mathbliss{{end}}">
    <meta property="og:description" content="{{if $description}}{{$description}}{{else}}Math explanations that actually make sense.{{end}}">
    <meta property="og:type" content="{{if $type}}{{$type}}{{else}}website{{end}}">
    <meta property="og:url" content="{{$fullURL}}">
    <meta property="og:image" content="{{$image}}">
    <meta property="og:site_name" content="mathbliss">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="{{if $title}}{{$title}}{{else}}mathbliss{{end}}">
    <meta name="twitter:description" content="{{if $description}}{{$description}}{{else}}Math explanations that actually make sense.{{end}}">
    <meta name="twitter:image" content="{{$image}}">

    <!-- Favicon -->
    <link rel="apple-touch-icon" sizes="180x180" href="{{.Site.BasePath}}/apple-touch-icon.png">
    <link rel="icon" type="image/png" sizes="32x32" href="{{.Site.BasePath}}/favicon-32x32.png">
    <link rel="icon" type="image/png" sizes="16x16" href="{{.Site.BasePath}}/favicon-16x16.png">
    <link rel="manifest" href="{{.Site.BasePath}}/site.webmanifest">

    <!-- Fonts & Styles -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Crimson+Pro:ital,wght@0,400;0,500;0,600;1,400;1,500&family=Outfit:wght@400;500;600;700&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{.Site.BasePath}}/styles/main.css">
</head>
{{end}}

{{define "header"}}
<header class="site-header">
    <div class="header-inner">
        <a href="{{.Site.BasePath}}/" class="wordmark">mathbliss</a>
        <nav class="main-nav">
            <a href="{{.Site.BasePath}}/">Home</a>
            {{range .Site.Categories}}<a href="{{.URL}}">{{.Name}}</a>{{end}}
            <a href="{{$.Site.BasePath}}/about/">About</a>
        </nav>
        <button class="nav-toggle" aria-label="Toggle navigation">
            <span></span>
            <span></span>
        </button>
    </div>
</header>
{{end}}

{{define "footer"}}
<footer class="site-footer">
    <div class="footer-inner">
        <div class="footer-doodle" aria-hidden="true">
            <svg viewBox="0 0 120 40" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M10 30 Q30 10 50 30 T90 30" stroke="currentColor" stroke-width="2" fill="none" opacity="0.4"/>
                <circle cx="105" cy="20" r="8" stroke="currentColor" stroke-width="2" fill="none" opacity="0.3"/>
                <text x="103" y="24" font-size="10" fill="currentColor" opacity="0.4">x</text>
            </svg>
        </div>
        <p class="footer-tagline">Math that clicks.</p>
        <p class="footer-meta">
            Made by <a href="https://www.learnwithoj.com/" target="_blank" rel="noopener">O.J. Wilcox</a>
        </p>
    </div>
</footer>
<script data-goatcounter="https://mathbliss.goatcounter.com/count" async src="https://gc.zgo.at/count.js"></script>
{{end}}
